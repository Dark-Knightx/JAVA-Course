<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8">
  <title>User Login</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/patternlock/dist/patternlock.min.css">
  <style>
    body {
        background-image: url("image/anime_indoors_peace_landscape-45040.jpg!d");
        background-size: cover;
        background-repeat: no-repeat;
    }
    .bg {
        padding: 4%;
        background-color: rgba(0, 0, 0, 0.595);
        color: rgb(55, 69, 82);
        border-radius: 4%;
    }
    h2 {
        color: rgb(206, 253, 241);
        font-weight: 400;
        text-align: center;
    }
    .btn-info {
        background-color: #83698a;
        border-color: #935fa0;
    }
    #patternContainer {
        width: 300px;
        height: 300px;
        margin: 20px auto;
    }
    #patternContainer svg {
        width: 100%;
        height: 100%;
    }
    #patternContainer circle {
        fill: #000; /* Dot color */
        stroke: #fff; /* Border color */
        stroke-width: 2px;
        r: 15px; /* Radius of the dots, adjust if necessary */
    }
    #patternContainer line {
        stroke: #007bff; /* Line color when connecting dots */
        stroke-width: 4px;
    }
  </style>
</head>
<body>
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-5 bg">
      <h2>User Login</h2>
      <form th:action="@{/loginPage}" method="post" class="mt-3">
        <div class="form-floating mb-3">
          <input type="text" class="form-control" id="floatingInput" name="username" placeholder="name@example.com">
          <label for="floatingInput">Email address</label>
        </div>
        <div class="form-floating mb-3">
          <input type="password" class="form-control" id="floatingPassword" name="password" placeholder="Password">
          <label for="floatingPassword">Password</label>
        </div>
        <div id="patternContainer"></div>
        <input type="hidden" id="patternInput" name="pattern">
        <button class="btn-block btn btn-info mt-4" type="submit">Sign In</button>
      </form>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/patternlock/dist/patternlock.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
      const lock = new PatternLock("#patternContainer", {
          matrix: [3, 3], // Default grid size: 3x3
          onDraw: function(pattern) {
              // Assign drawn pattern to the hidden input field
              document.getElementById("patternInput").value = pattern;
              console.log("Pattern drawn:", pattern);
          }
      });
      console.log("PatternLock initialized successfully.");
  });

    document.querySelector('form').addEventListener('submit', function(e) {
      console.log('Pattern before submit:', document.getElementById("patternInput").value);
  });

</script>
</body>
</html>
